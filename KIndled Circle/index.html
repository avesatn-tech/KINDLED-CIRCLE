<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Embers â€” Guides</title>
  <link rel="stylesheet" href="main.css">
  <style>
    /* temporary safety rules to ensure sigward always visible */
    .decor-sigward { opacity: 1 !important; display:block !important; }
    .decor-sigward-wrap { overflow: visible !important; }
  </style>
</head>
<body>
  <div class="container">
    <!-- HERO (omitted for brevity; keep your existing hero) -->
    <header class="hero" role="banner"> ... </header>

    <main>
      <!-- Persona cards -->
      <section id="persona-cards" class="persona-cards" aria-label="Choose persona">
        <!-- your persona cards here -->
      </section>

      <!-- Decorative Sigward sits here (directly after persona-cards) -->
      <div class="decor-sigward-wrap" aria-hidden="true">
        <!-- Preferred production path: img/sigward.png -->
        <!-- If you want to preview the uploaded file in the session, use /mnt/data/sigward.png -->
        <img id="sigward-el" class="decor-sigward" src="img/sigward.png" alt="Sigward decorative">
      </div>

      <!-- Instruction and chat follow -->
      <hr class="hr-subtle">
      <section class="card" id="pick-hint"> ... </section>
      <section id="chat" class="card"> ... </section>
    </main>
  </div>

  <script>
    // Safety JS: ensure image loaded, fallback to session file if not found,
    // then add bob class to animate.
    (function(){
      const img = document.getElementById('sigward-el');

      function enableBob(){
        // add bob if not present
        img.classList.add('bob');
        img.style.opacity = '1';
      }

      // if the image fails to load, try the session-local preview path
      img.addEventListener('error', function(){
        console.warn('Sigward image failed to load at', img.src);
        // try session preview - useful for quick checks (remove in production)
        const sessionPath = '/mnt/data/sigward.png';
        if (img.src !== sessionPath) {
          img.src = sessionPath;
        } else {
          // last resort: show small placeholder so we know wrapper visible
          img.style.width = '120px';
          img.style.opacity = '1';
          img.style.filter = 'grayscale(.6) contrast(.9)';
        }
      });

      img.addEventListener('load', function(){
        enableBob();
        // ensure it is visible and constrained nicely
        img.style.maxWidth = '45%';
        img.style.height = 'auto';
      });

      // safety timeout: if nothing fires in 800ms, force visible
      setTimeout(function(){
        if (!img.complete || img.naturalWidth === 0) {
          // maybe still loading; try session fallback
          if (img.src.indexOf('/mnt/data') === -1) img.src = '/mnt/data/sigward.png';
        } else {
          enableBob();
        }
      }, 800);
    })();
  </script>
</body>
</html>
