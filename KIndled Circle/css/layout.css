/* layout.css — full replacement
   Restored header + stable Sigward sizing and placement so PNG never overflows.
   Replace this file entirely in css/ folder.
*/

/* Root sizing vars (should match main.css) */
:root{
  --h-pad: clamp(12px, 2.2vw, 22px);
  --h-gap: clamp(12px, 2.4vw, 28px);
  --title-size: clamp(22px, 4.4vw, 40px);
  --lead-size: clamp(13px, 2.1vw, 16px);
  --emblem-size: clamp(48px, 8vw, 96px);
  --emblem-wrap: calc(var(--emblem-size) * 1.6);
}

/* HERO: proportional, fluid */
.hero{
  width: calc(100% + 2rem);
  margin-left: -1rem;
  margin-right: -1rem;
  padding: calc(var(--h-pad)) calc(var(--h-pad) * 1.25);
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
  z-index:5;
  background: rgba(12,12,12, 0.18);
  box-shadow: 0 12px 36px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.02);
  backdrop-filter: blur(6px) saturate(1.05);
  -webkit-backdrop-filter: blur(6px) saturate(1.05);
  overflow:visible;
}

/* seam */
.hero::after{
  content: "";
  position: absolute;
  left: calc(var(--h-pad) * 1.25);
  right: calc(var(--emblem-wrap) + (var(--h-gap)));
  bottom: -10px;
  height: 2px;
  border-radius: 2px;
  background: linear-gradient(90deg, rgba(224,122,46,0) 0%, rgba(224,122,46,0.18) 40%, rgba(224,122,46,0.25) 50%, rgba(224,122,46,0.18) 60%, rgba(224,122,46,0) 100%);
  filter: blur(8px);
  opacity:0.9;
  pointer-events:none;
}

/* inner layout */
.hero-inner{display:flex;align-items:center;gap:var(--h-gap);width:100%}
.hero-left{flex:1;min-width:0}
.hero-right{width:var(--emblem-wrap);display:flex;align-items:center;justify-content:center;padding-left:calc(var(--h-gap) / 2);}

/* title + lead */
.site-title{
  font-family:var(--serif);
  font-size: var(--title-size);
  margin:0 0 .2rem 0;
  letter-spacing:.6px;
  color:var(--text);
  line-height:1.02;
}
.hero-lead{
  margin:0 0 .45rem 0;
  color:var(--muted);
  max-width:60ch;
  font-size:var(--lead-size);
}

/* CTA */
.hero-cta{display:flex;gap:.6rem;align-items:center}

/* EMBLEM (subtle framed) */
.hero-logo-wrap{
  width: var(--emblem-wrap);
  height: var(--emblem-wrap);
  border-radius:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  background: linear-gradient(180deg, rgba(255,255,255,0.005), rgba(255,255,255,0.00));
  box-shadow: 0 20px 40px rgba(0,0,0,0.55);
  border:1px solid rgba(255,255,255,0.02);
  position: relative;
  overflow: hidden;
  transform: translateZ(0);
}
.hero-logo-wrap::after{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:10px;
  pointer-events:none;
  border:1px solid rgba(224,122,46,0.08);
  mix-blend-mode:screen;
  opacity:0.95;
}
.hero-spark{
  width: var(--emblem-size);
  height: var(--emblem-size);
  object-fit:contain;
  display:block;
  filter: drop-shadow(0 18px 36px rgba(224,122,46,0.12));
  background:transparent;
  transform: translateZ(0);
}

/* PERSONAS grid */
.persona-cards{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:1rem;
  margin:1rem 0;
  padding-top:0.25rem;
  z-index:2;
  overflow:visible;
}
.persona.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:12px;
  padding:1rem;
  border:1px solid rgba(255,255,255,0.02);
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  transition: transform .16s ease, box-shadow .18s ease, border-color .16s ease;
  display:flex;
  flex-direction:column;
  gap:.6rem;
  align-items:flex-start;
  cursor:pointer;
  min-height:150px;
}
.persona.card:focus, .persona.card:hover{transform:translateY(-6px);box-shadow: 0 18px 40px rgba(0,0,0,0.7);border-color: rgba(224,122,46,0.12)}
.persona-icon{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:10px;background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(224,122,46,0.02));border:1px solid rgba(255,255,255,0.02);box-shadow: inset 0 -2px 6px rgba(0,0,0,0.25)}
.persona-icon img{width:40px;height:40px;object-fit:contain;display:block;filter:none}
.persona h3{margin:0;font-size:1.05rem}
.persona-desc{margin:0;color:var(--muted);font-size:.92rem}
.card-actions{margin-top:auto;display:flex;gap:.5rem;width:100%;justify-content:flex-end}
.persona.card.selected{outline:none;border-color: rgba(224,122,46,0.18);box-shadow: 0 18px 40px rgba(224,122,46,0.06)}

/* chat tweaks */
#chat .card{padding:.6rem;margin-bottom:.6rem}
#messages{max-height:420px;overflow:auto;padding:.25rem}
#chat-input{resize:vertical;min-height:56px;padding:.5rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}

/* ========== SIGWARD DECOR (fixed sizing) ==========
   Use a trimmed PNG (transparent bg). This block places the image visually
   sitting on top of persona area without overflowing. */

/* wrapper: keep decorative but non-interactive */
.decor-sigward-wrap{
  position: relative;
  width: 100%;
  pointer-events: none;
  /* smaller negative margin so it doesn't lift too much */
  margin-top: -18px;
  display:flex;
  justify-content:flex-end; /* desktop: sits toward right edge */
  z-index:4;
  padding-right: 8px; /* small inward nudge */
  overflow: visible;
}

/* SIGWARD image: strict responsive constraints */
.decor-sigward{
  display:block;
  width: clamp(220px, 28vw, 420px); /* safe responsive width */
  max-width: 45%;                  /*% relative to container */
  height: auto;
  max-height: calc( (var(--emblem-wrap) * 1.6) ); /* ensure it never exceeds reasonable height */
  object-fit: contain;             /* keep whole figure visible */
  transform-origin: center bottom;
  will-change: transform, opacity;
  opacity: 0;
  transform: translateY(6px) scale(0.995);
  animation: sigwardIn .48s cubic-bezier(.2,.9,.3,1) forwards .12s;
}

/* optional slow bob motion — enable by adding 'bob' class */
.decor-sigward.bob { animation: sigwardBob 3.8s ease-in-out infinite; }

/* subtle hover lift (pointer-events currently none; enable later if needed) */
.decor-sigward:hover{ transform: translateY(-4px) scale(1.01); }

/* entry + bob keyframes */
@keyframes sigwardIn{
  to{ opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes sigwardBob{
  0%{ transform: translateY(0) }
  50%{ transform: translateY(-6px) }
  100%{ transform: translateY(0) }
}

/* RESPONSIVE: on small screens center and reduce size further */
@media (max-width:900px){
  .persona-cards{grid-template-columns:repeat(2,1fr);gap:.9rem}
}
@media (max-width:720px){
  :root{
    --h-pad: clamp(10px, 3vw, 14px);
    --h-gap: clamp(10px, 3.4vw, 16px);
    --title-size: clamp(20px, 6vw, 28px);
    --lead-size: clamp(12px, 2.8vw, 14px);
    --emblem-size: clamp(40px, 10vw, 60px);
    --emblem-wrap: calc(var(--emblem-size) * 1.5);
  }

  .hero{width:100%;margin-left:0;margin-right:0;border-radius:12px;padding:14px}
  .hero-inner{flex-direction:column;align-items:flex-start;gap:.85rem}
  .hero-right{width:100%;display:flex;justify-content:center;padding-left:0;margin-top:4px}
  .hero-logo-wrap{width:var(--emblem-wrap);height:var(--emblem-wrap);border-radius:12px}
  .hero::after{ right: calc(var(--emblem-wrap) + var(--h-gap)); }

  /* mobile: single column personas */
  .persona-cards{grid-template-columns:1fr;gap:1rem;margin:1rem 0;padding:0}
  .persona.card{min-height:170px;padding:1.1rem;border-radius:14px}
  .card-actions{justify-content:flex-start;gap:.6rem}

  /* push sigward into center and reduce size */
  .decor-sigward-wrap{
    justify-content:center;
    margin-top: 6px; /* small positive margin to avoid overlap */
    padding-right: 0;
  }
  .decor-sigward{
    width: clamp(160px, 40vw, 320px);
    max-width: 60%;
    animation-delay: .06s;
  }
}
