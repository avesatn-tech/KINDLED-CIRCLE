/* layout.css — header, persona cards and decorative Sigward placement
   Full replacement: includes Sigward "sits on block" rules and mobile behavior.
*/

/* sizing variables (kept in sync with main.css) */
:root{
  --h-pad: clamp(12px, 2.2vw, 22px);
  --h-gap: clamp(12px, 2.4vw, 28px);
  --title-size: clamp(22px, 4.4vw, 40px);
  --lead-size: clamp(13px, 2.1vw, 16px);
  --emblem-size: clamp(48px, 8vw, 96px);
  --emblem-wrap: calc(var(--emblem-size) * 1.6);
}

/* HERO (unchanged from previous proportional header) */
.hero{
  width: calc(100% + 2rem);
  margin-left: -1rem;
  margin-right: -1rem;
  padding: calc(var(--h-pad)) calc(var(--h-pad) * 1.25);
  border-radius: 14px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  position:relative;
  z-index:5;
  background: rgba(12,12,12, 0.18);
  box-shadow: 0 12px 36px rgba(0,0,0,0.6);
  border: 1px solid rgba(255,255,255,0.02);
  backdrop-filter: blur(6px) saturate(1.05);
  -webkit-backdrop-filter: blur(6px) saturate(1.05);
  overflow:visible;
}
.hero::after{
  content: "";
  position: absolute;
  left: calc(var(--h-pad) * 1.25);
  right: calc(var(--emblem-wrap) + (var(--h-gap)));
  bottom: -10px;
  height: 2px;
  border-radius: 2px;
  background: linear-gradient(90deg, rgba(224,122,46,0) 0%, rgba(224,122,46,0.18) 40%, rgba(224,122,46,0.25) 50%, rgba(224,122,46,0.18) 60%, rgba(224,122,46,0) 100%);
  filter: blur(8px);
  opacity:0.9;
  pointer-events:none;
}
.hero-inner{display:flex;align-items:center;gap:var(--h-gap);width:100%}
.hero-left{flex:1;min-width:0}
.hero-right{width:var(--emblem-wrap);display:flex;align-items:center;justify-content:center;padding-left:calc(var(--h-gap) / 2);}

/* site title + lead */
.site-title{font-family:var(--serif);font-size: var(--title-size);margin:0 0 .2rem 0;letter-spacing:.6px;color:var(--text);line-height:1.02}
.hero-lead{margin:0 0 .45rem 0;color:var(--muted);max-width:60ch;font-size:var(--lead-size)}

/* persona grid baseline */
.persona-cards{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:1rem;
  margin:1rem 0;
  padding-top:0.25rem;
  z-index:2;
  overflow:visible;
}
.persona.card{
  background: linear-gradient(180deg, rgba(255,255,255,0.01), transparent);
  border-radius:12px;
  padding:1rem;
  border:1px solid rgba(255,255,255,0.02);
  box-shadow: 0 8px 20px rgba(0,0,0,0.6);
  transition: transform .16s ease, box-shadow .18s ease, border-color .16s ease;
  display:flex;
  flex-direction:column;
  gap:.6rem;
  align-items:flex-start;
  cursor:pointer;
  min-height:150px;
}
.persona.card:focus, .persona.card:hover{transform:translateY(-6px);box-shadow: 0 18px 40px rgba(0,0,0,0.7);border-color: rgba(224,122,46,0.12)}
.persona-icon{width:56px;height:56px;display:flex;align-items:center;justify-content:center;border-radius:10px;background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(224,122,46,0.02));border:1px solid rgba(255,255,255,0.02);box-shadow: inset 0 -2px 6px rgba(0,0,0,0.25)}
.persona-icon img{width:40px;height:40px;object-fit:contain;display:block;filter:none}
.persona h3{margin:0;font-size:1.05rem}
.persona-desc{margin:0;color:var(--muted);font-size:.92rem}
.card-actions{margin-top:auto;display:flex;gap:.5rem;width:100%;justify-content:flex-end}
.persona.card.selected{outline:none;border-color: rgba(224,122,46,0.18);box-shadow: 0 18px 40px rgba(224,122,46,0.06)}

/* CHAT tweaks */
#chat .card{padding:.6rem;margin-bottom:.6rem}
#messages{max-height:420px;overflow:auto;padding:.25rem}
#chat-input{resize:vertical;min-height:56px;padding:.5rem;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:var(--text)}

/* ========== SIGWARD DECOR ========== */
/* The wrapper sits after main content and is positioned so the PNG appears to sit on persona-cards.
   Desktop: sits to the right-bottom of persona area; Mobile: centered under persona area.
   Use a transparent PNG at img/sigward.png (recommended sizes: 400–900px width, trimmed). */

.decor-sigward-wrap{
  position: relative;
  width: 100%;
  pointer-events: none; /* decorative only */
  margin-top: -36px; /* lift upwards so Sigward appears sitting on top of block edge */
  display:flex;
  justify-content:flex-end;
  z-index:4;
  padding-right: calc(var(--emblem-wrap) * 0.08); /* nudge away from right edge */
}

/* image itself */
.decor-sigward{
  width: 320px;                 /* default desktop visual size */
  max-width: 36%;
  height: auto;
  display:block;
  transform-origin: center bottom;
  will-change: transform, opacity;
  opacity: 0;
  transform: translateY(10px) scale(0.98);
  animation: sigwardIn .6s cubic-bezier(.2,.9,.3,1) forwards .15s;
}

/* small slow bob (weeping / low mumble) */
.decor-sigward.bob {
  animation: sigwardBob 3.6s ease-in-out infinite;
}

/* hover subtle lift (if pointer events enabled later) */
.decor-sigward:hover{
  transform: translateY(-4px) scale(1.01);
}

/* entry animation and bob */
@keyframes sigwardIn{
  to{ opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes sigwardBob{
  0%{ transform: translateY(0) scale(1); }
  50%{ transform: translateY(-6px) scale(1.002); }
  100%{ transform: translateY(0) scale(1); }
}

/* responsive: on smaller screens push to center and reduce size, remove negative margin */
@media (max-width:720px){
  .decor-sigward-wrap{
    justify-content:center;
    margin-top: 8px;
    padding-right: 0;
  }
  .decor-sigward{
    width: calc(var(--emblem-size) * 2.2);
    max-width: 60%;
    animation-delay: .06s;
  }
}
